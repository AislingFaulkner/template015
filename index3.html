<!DOCTYPE html>
<head>	

</head>
<body>
<script src="lib/crafty-min.js"></script>
<script src="src/components.js"></script>
<script type="text/javascript">
//Crafty.init(600, 300);
//Crafty.background('rgb(127,127,127)');

Game = 
{
    // This defines our grid's size and the size of each of its tiles
    map_grid: {
    width: 60,
    height: 40,
    tile: {
    width: 16,
    height: 16
    }
    },
    // The total width of the game screen. Since our grid takes up the entire screen
    // this is just the width of a tile times the width of the grid
    width: function() {
    return this.map_grid.width * this.map_grid.tile.width;
    },
    // The total height of the game screen. Since our grid takes up the entire screen
    // this is just the height of a tile times the height of the grid
    height: function() {
    return this.map_grid.height * this.map_grid.tile.height;
    },
    // Initialize and start our game
    
    start: function() 
    {
    
        // Start crafty and set a background color so that we can see it's working
        Crafty.init(Game.width(), Game.height());
        Crafty.background('rgb(249, 223, 125)');
        // Place a tree at every edge square on our grid of 16x16 tiles
      
        for (var x = 0; x < Game.map_grid.width; x++) {
            for (var y = 0; y < Game.map_grid.height; y++) {
                var at_edge = x == 0 || x == Game.map_grid.width - 1 || y == 0 || y == Game.map_grid.height - 1;
         
        if (at_edge) {
        // Place a tree entity at the current tile
        Crafty.e('Tree').at(x, y);
        } else if (Math.random() < 0.01) {
        // Place a bush entity at the current tile
        Crafty.e('Bush').at(x, y);
        }
    }
}

Crafty.e("Puddle,2D, DOM, Color,Grid, Collision,Keyboard")

    .bind('keydown', function(e) {
  
//    console.log('key');
    
 //   if(e.keyCode != Crafty.keys.RA                            ) {
       console.log ('left');
 //   }
   
  /*      if(e.keyCode == Crafty.keys.SP) {
            if(!this.shoot) {
                this.shoot = true;
                 console.log ('shoot');
                this.delay(function() {
                    this.shoot = false;
                }, 100);
              console.log ('shoot');
             */   
                //Crafty.audio.play("shoot");
                
      /*          var bx, dir;
                if(this.facingRight) {
                    this.sprite(5,2,1,2);
                    bx = this.x + 32;
                    dir = 'e';
                } else {
                    this.sprite(5,0,1,2);
                    bx = this.x - 5;
                    dir = 'w';
                }
            */   
             // //  Crafty.e("2D, DOM, color, bullet").attr({x: bx, y: this.y + 31, w: 5, h: 2, z:50}).color("rgb(250,0,0)").bullet(dir);
             //   var old = this.pos();
              //  this.trigger("change",old);
    //        }
 //       }
     //   if(e.keyCode === Crafty.keys.D || e.keyCode === Crafty.keys.RA) this.facingRight = true;
     //   if(e.keyCode === Crafty.keys.A || e.keyCode === Crafty.keys.LA) this.facingRight = false;
    })
        .at(25, 15)
   // .attr({  w: 10, h: 40})
; 



/*


//Ball
Crafty.e("2D, DOM, Color,Grid, Collision,test")

    


	.color('rgb(0,0,255)')
	
	.attr({ x: Game.Puddle.x, y: Game.Puddle.y, w: 10, h: 10, 
			    dX: Crafty.math.randomInt(2, 5), 
			    dY: Crafty.math.randomInt(2, 5) })
   
	
	.bind('EnterFrame', function () 
	{
		//hit floor or roof
		if (this.y <= 10 || this.y >= 490)
			this.dY *= -1;

		if (this.x > 910) {
			this.x = 300;
			Crafty("LeftPoints").each(function () { 
				this.text(++this.points + " Points") });
		}
		if (this.x < 10) {
			this.x = 300;
			Crafty("RightPoints").each(function () { 
				this.text(++this.points + " Points") });
		}

		this.x += this.dX;
		this.y += this.dY;
	})
	
	.onHit('Bush', function () {
	    this.dX *= -1;
    })
    
    .onHit('Puddle', function () {
	    this.dX *= -1;
	    console.log('bang');
    })

;



*/


//Score boards
Crafty.e("LeftPoints, DOM, 2D, Text")
	.attr({ x: 20, y: 20, w: 100, h: 20, points: 0 })
	.text("0 Points");
	
Crafty.e("RightPoints, DOM, 2D, Text")
	.attr({ x: 515, y: 20, w: 100, h: 20, points: 0 })
	.text("0 Points");
  }
}
</script>
<script>
window.addEventListener('load', Game.start);
</script>
</body>
</html>

